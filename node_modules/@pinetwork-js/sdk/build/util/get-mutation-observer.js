"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.getLocationTracker = void 0;
const handlers_1 = require("../handlers");
const message_types_1 = require("../message-types");
const extract_properties_1 = require("./extract-properties");
function getLocationTracker() {
    let previousLocation = document.location.href;
    return new MutationObserver(() => {
        if (previousLocation === document.location.href) {
            return;
        }
        previousLocation = document.location.href;
        const location = (0, extract_properties_1.extractProperties)(document.location, [
            'hash',
            'host',
            'hostname',
            'href',
            'origin',
            'pathname',
            'port',
            'protocol',
            'search',
        ]);
        handlers_1.MessageHandler.sendSDKMessage({
            type: message_types_1.MessageType.TRACK_LOCATION,
            payload: {
                location,
            },
        });
    });
}
exports.getLocationTracker = getLocationTracker;
